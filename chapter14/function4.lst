     1                                  ;; function4.asm
     2                                  extern	printf
     3                                  extern	c_area
     4                                  extern	c_circum
     5                                  extern	r_area
     6                                  extern	r_circum
     7                                  global	pi
     8                                  section	.data
     9 00000000 50455254FB210940        	pi	dq	3.141592654
    10 00000008 0000000000002440        	radius	dq	10.0	
    11 00000010 0400000000000000        	side1	dq	4
    12 00000018 0500000000000000        	side2	dq	5
    13 00000020 257325660A00            	fmtf	db	"%s%f",10,0
    14 00000026 257325640A00            	fmti	db	"%s%d",10,0
    15 0000002C 54686520636972636C-     	ca	db	"The circle area is ",0
    15 00000035 652061726561206973-
    15 0000003E 2000               
    16 00000040 54686520636972636C-     	cc	db	"The circle circumference is ",0
    16 00000049 652063697263756D66-
    16 00000052 6572656E6365206973-
    16 0000005B 2000               
    17 0000005D 546865207265637461-     	ra	db	"The rectangle area is ",0
    17 00000066 6E676C652061726561-
    17 0000006F 2069732000         
    18 00000074 546865207265637461-     	rc	db	"The rectangle circumference is ",0
    18 0000007D 6E676C652063697263-
    18 00000086 756D666572656E6365-
    18 0000008F 2069732000         
    19                                  section	.bss
    20                                  section	.text
    21                                  	global main
    22                                  ;--------------------------------------
    23                                  main:
    24 00000000 55                      	push	rbp
    25 00000001 4889E5                  	mov	rbp, rsp
    26                                  	
    27                                  	; Circle area.
    28 00000004 F20F100425-             	movsd	xmm0, qword [radius]
    28 00000009 [08000000]         
    29 0000000D E8(00000000)            	call	c_area			; Result in xmm0.
    30                                  	
    31                                  	; Print circle area.
    32 00000012 48BF-                   	mov	rdi, fmtf
    32 00000014 [2000000000000000] 
    33 0000001C 48BE-                   	mov	rsi, ca
    33 0000001E [2C00000000000000] 
    34 00000026 B801000000              	mov	rax, 1
    35 0000002B E8(00000000)            	call	printf
    36                                  	
    37                                  	; Circle circumference.
    38 00000030 F20F100425-             	movsd	xmm0, qword [radius]
    38 00000035 [08000000]         
    39 00000039 E8(00000000)            	call	c_circum		; Result in xmm0.
    40                                  
    41                                  	; Print circle circumference.
    42 0000003E 48BF-                   	mov	rdi, fmtf
    42 00000040 [2000000000000000] 
    43 00000048 48BE-                   	mov	rsi, cc
    43 0000004A [4000000000000000] 
    44 00000052 B801000000              	mov	rax, 1
    45 00000057 E8(00000000)            	call	printf
    46                                  	
    47                                  	; Rectangle area.
    48 0000005C 488B3C25[10000000]      	mov	rdi, [side1]
    49 00000064 488B3425[18000000]      	mov	rsi, [side2]
    50 0000006C E8(00000000)            	call	r_area			; Result in rax.
    51                                  	
    52                                  	; Print rectangle area.
    53 00000071 48BF-                   	mov	rdi, fmti
    53 00000073 [2600000000000000] 
    54 0000007B 48BE-                   	mov	rsi, ra
    54 0000007D [5D00000000000000] 
    55 00000085 4889C2                  	mov	rdx, rax
    56 00000088 B800000000              	mov	rax, 0
    57 0000008D E8(00000000)            	call	printf
    58                                  
    59                                  	; Rectangle circumference
    60 00000092 488B3C25[10000000]      	mov	rdi, [side1]
    61 0000009A 488B3425[18000000]      	mov	rsi, [side2]
    62 000000A2 E8(00000000)            	call	r_circum		; Result in rax.
    63                                  	
    64                                  	; Print rectangle circumference.
    65 000000A7 48BF-                   	mov	rdi, fmti
    65 000000A9 [2600000000000000] 
    66 000000B1 48BE-                   	mov	rsi, rc
    66 000000B3 [7400000000000000] 
    67 000000BB 4889C2                  	mov	rdx, rax
    68 000000BE B800000000              	mov	rax, 0
    69 000000C3 E8(00000000)            	call	printf
    70                                  	
    71 000000C8 4889EC                  	mov	rsp, rbp
    72 000000CB 5D                      	pop	rbp
    73 000000CC C3                      	ret
